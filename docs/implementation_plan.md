# 모두의 헌법 퀴즈 - 개발 계획서 (Implementation Plan)

> **버전**: v1.1  
> **작성일**: 2026-01-18 (최종 수정: 2026-02-18)  
> **PRD 기준**: constitution-quiz-prd-v0.5.md  
> **디자인 참고**: design-reference.png

---

## 1. 프로젝트 개요

### 1.1 서비스 소개
"모두의 헌법"은 대한민국 헌법 관련 퀴즈를 쉬운 단계부터 어려운 단계로 풀어나가며 헌법에 대한 지식을 쉽고 재미있게 쌓을 수 있는 모바일 웹앱입니다.

### 1.2 기술 스택
| 분류 | 기술 |
|------|------|
| 언어 | TypeScript |
| 프레임워크 | Next.js 14 (App Router) |
| 스타일링 | Tailwind CSS + shadcn/ui |
| 아이콘 | Lucide React |
| DB & 인증 | Supabase (PostgreSQL + Auth) |
| 배포 | Vercel |

### 1.3 디자인 컨셉
- **컨셉**: 모던하고 세련된 디자인, 글래스모피즘
- **테마**: Light
- **Primary 색상**: `#2D2D2D`
- **Secondary 색상**: `#FF8400` (주황색)
- **Background**: `#ffffff`
- **레이아웃**: 모바일 전용 (max-width: 480px, PC에서 중앙 정렬)

---

## 2. 폴더 구조

프로젝트의 폴더는 **역할별로 분리**하여 유지보수가 쉽도록 구성합니다.

```
constitution-quiz-0.5/
├── src/
│   ├── app/                       # Next.js App Router (페이지)
│   │   ├── auth/
│   │   │   └── callback/
│   │   │       └── route.ts       # OAuth 콜백 처리
│   │   ├── login/
│   │   │   └── page.tsx           # 로그인 페이지
│   │   ├── onboarding/
│   │   │   └── page.tsx           # 온보딩 (닉네임 설정)
│   │   ├── quiz/
│   │   │   └── [packId]/
│   │   │       ├── page.tsx       # 퀴즈 풀이 화면
│   │   │       └── complete/
│   │   │           └── page.tsx   # 퀴즈팩 완료 화면
│   │   ├── profile/
│   │   │   └── page.tsx           # 마이페이지
│   │   ├── api/
│   │   │   └── user/
│   │   │       └── delete/
│   │   │           └── route.ts   # 회원탈퇴 API Route
│   │   ├── page.tsx               # 홈 (퀴즈팩 목록)
│   │   ├── layout.tsx             # 루트 레이아웃
│   │   └── globals.css            # 글로벌 스타일
│   │
│   ├── components/                # 재사용 컴포넌트
│   │   ├── common/                # 공통 (MobileFrame, Header)
│   │   ├── auth/                  # 인증 (AuthProvider, LogoutButton)
│   │   ├── home/                  # 홈 (QuizpackCard, QuizpackList)
│   │   ├── quiz/                  # 퀴즈 (각 유형 컴포넌트, 다이얼로그)
│   │   ├── profile/               # 마이페이지 (WithdrawDialog)
│   │   └── ui/                    # shadcn/ui 컴포넌트
│   │
│   ├── hooks/                     # 커스텀 훅
│   │   └── useQuizpacks.ts        # 퀴즈팩 목록 조회
│   │
│   ├── lib/                       # 라이브러리/유틸리티
│   │   ├── supabase/              # Supabase 설정 (client, server, middleware)
│   │   ├── api/                   # API 함수 (quiz.ts, user.ts)
│   │   └── utils/                 # 유틸리티 (seededShuffle 등)
│   │
│   └── types/                     # TypeScript 타입 정의
│       └── database.ts            # Supabase 스키마 타입
│
├── public/                        # 정적 파일 (BI, 효과음 등)
├── docs/                          # 문서
├── .env.local                     # 환경변수 (git 제외)
└── middleware.ts                   # Next.js 미들웨어 (인증)
```

---

## 3. 개발 단계별 상세 계획

### Phase 1: 프로젝트 초기 설정 (예상: 2-3시간)

#### 작업 내용
| 작업 | 설명 | 파일 |
|------|------|------|
| Next.js 프로젝트 생성 | `npx create-next-app@latest` 사용 | 프로젝트 루트 |
| Tailwind 설정 | 디자인 토큰 (색상, 폰트) 정의 | `tailwind.config.ts` |
| shadcn/ui 설치 | Button, Input, Dialog 등 기본 컴포넌트 | `components/ui/` |
| Supabase 연동 | 클라이언트/서버 설정 | `lib/supabase/` |
| 환경변수 | Supabase URL, Key 등 | `.env.local` |
| TypeScript 타입 | DB 스키마 기반 타입 생성 | `types/database.ts` |

#### Tailwind 커스텀 설정 (tailwind.config.ts)
```typescript
colors: {
  primary: '#2D2D2D',      // 주요 색상 (다크그레이)
  secondary: '#FF8400',    // 보조 색상 (주황)
  background: '#ffffff',   // 배경 (화이트)
}
```

#### 글로벌 스타일 (globals.css)
- 글래스모피즘 효과: `backdrop-blur`, 반투명 배경
- 모바일 프레임: `max-w-[480px]`, `min-h-[100dvh]`
- iOS Safari 대응: `overscroll-behavior: none`

---

### Phase 2: 공통 UI 컴포넌트 (예상: 3-4시간)

#### 주요 컴포넌트
| 컴포넌트 | 설명 | 위치 |
|----------|------|------|
| `MobileFrame` | 480px 중앙 정렬 컨테이너, PC에서 그림자 | `components/common/` |
| `Header` | BI 로고 (클릭→홈), 프로필 아이콘 (클릭→마이페이지) | `components/common/` |
| `Toast` | 알림 메시지 (상단/하단) | `components/common/` |
| `Button` | 프라이머리(검정)/세컨더리(보라) 스타일 | `components/ui/` |

#### MobileFrame 구현 핵심
```tsx
// PC에서 중앙 정렬 + 그림자
<div className="mx-auto max-w-[480px] min-h-[100dvh] shadow-2xl bg-white">
  {children}
</div>
```

---

### Phase 3: 인증 시스템 (예상: 4-5시간)

#### 작업 내용
| 작업 | 설명 |
|------|------|
| Google OAuth | Supabase Auth 콘솔에서 설정 |
| Kakao OAuth | Supabase Auth 콘솔에서 설정 |
| 로그인 페이지 | BI, 슬로건, 소셜 로그인 버튼 |
| AuthProvider | 인증 상태 Context |
| 미들웨어 | 비로그인 시 로그인 페이지로 리다이렉트 |

#### 로그인 페이지 UI
- BI 이미지 (스프라이트 애니메이션)
- 슬로건: "퀴즈로 즐기는 재미있는 헌법 상식"
- 약관 동의 안내 텍스트
- [Google 로그인] 버튼
- [Kakao 로그인] 버튼

---

### Phase 4: 온보딩 화면 (예상: 2-3시간)

#### 화면 흐름
1. 첫 로그인 사용자 → 온보딩 페이지로 리다이렉트
2. 닉네임 입력 (4~20자, 한글/영문/숫자만)
3. 실시간 중복 검사
4. [확정] 버튼 → DB 저장 → 3초 카운트 → 홈으로 이동

#### 닉네임 유효성 검사
```typescript
// 정규식
const nicknameRegex = /^[가-힣a-zA-Z0-9]{4,20}$/;
```

---

### Phase 5: 홈 화면 및 퀴즈팩 목록 (예상: 5-6시간)

#### QuizpackCard 표시 정보
- 순서 번호 (001, 002, ...)
- 난이도 범위 (예: 중하 - 중상)
- 태그 (예: #제1장 총강 #기본원칙)
- 퀴즈 개수 (예: 퀴즈 10개)
- 상태 (닫힘/열림/진행중/완료)
- 나의 정답률 또는 "아직 풀지 않았어요."
- 친구 정답률
- 평균 선호도 (별점)

#### 상태별 카드 스타일
| 상태 | 스타일 | 클릭 동작 |
|------|--------|----------|
| 닫힘 (closed) | 흐리게/잠금 아이콘 | 토스트: "순서대로 진행해 주세요." |
| 열림 (opened) | 기본 스타일 | 퀴즈팩 시작 (1번 퀴즈) |
| 진행중 (in_progress) | 진행바 표시 | 중단 지점부터 재개 |
| 완료 (completed) | 체크 아이콘/성공 색상 | 새로운 세션으로 시작 |

---

### Phase 6: 퀴즈 풀이 화면 (예상: 8-10시간)

#### 화면 구성
1. **나가기 버튼**: 왼쪽 상단, 클릭 시 중단 확인 팝업
2. **네비게이션**: ①②③... (최대 10개, 초과 시 좌우 스크롤)
3. **퀴즈 정보**: 장/조 번호, 난이도
4. **질문 영역**: 질문 텍스트
5. **지문 영역**: 관련 헌법 조문
6. **보기 영역**: 유형별 컴포넌트 (4지선다/OX/빈칸채우기)
7. **힌트 영역**: 토글로 표시/숨김
8. **버튼 영역**: [정답 확인] → [다음] / [완료]

#### 퀴즈 유형별 컴포넌트
| 유형 | 컴포넌트 | 특징 |
|------|----------|------|
| 4지선다 (multiple) | `MultipleChoice` | 1~2개 정답 선택 |
| OX (truefalse) | `TrueFalse` | 맞아요/틀려요 선택 |
| 빈칸채우기 (choiceblank) | `ChoiceBlank` | 빈칸에 보기 드래그 |

#### 정오답 효과
- **정답**: `correct.wav` 재생 + 초록색 오버레이 2초
- **오답**: `incorrect.wav` 재생 + 빨간색 오버레이 2초

---

### Phase 7: 퀴즈팩 완료 화면 (예상: 3-4시간)

#### 표시 정보
- 제목: "수고하셨습니다!"
- 안내: "#{퀴즈팩번호} 퀴즈팩을 완료했어요."
- 난이도 범위
- 정답률 (예: 70%)
- 정답수/문제수 (예: 7/10)
- 오답 퀴즈 번호 (예: ①④⑨)
- 소요 시간 (예: "4분 25초 걸렸어요.")
- 선호도 입력 (1회차에만, 별점 1~5)
- [나가기] / [다음 퀴즈팩 시작] 버튼

---

### Phase 8: 마이페이지 (예상: 3-4시간)

#### 표시 정보
- 프로필 아이콘
- 닉네임 (수정 가능)
- 계정 종류 (구글/카카오)
- 연동 이메일
- [로그아웃] 버튼
- 회원탈퇴 링크

---

### Phase 9: 고객센터

> ⚠️ **v0.5에서는 제외** - 향후 버전에서 구현 예정

#### 공지사항 기능
- 목록: 유형, 제목, 조회수, 작성일
- 검색: 제목+내용
- 상세: 팝업으로 표시
- 페이지네이션
- 관리자: CRUD 권한

---

### Phase 10: 테스트 및 최적화 (예상: 3-4시간)

#### 테스트 항목
- 크로스 브라우저: Chrome, Safari, Firefox
- 모바일 반응형: iOS Safari, 안드로이드 Chrome
- 기능 테스트: 로그인, 퀴즈 풀이, 완료, 프로필 수정

#### 최적화 항목
- 이미지 최적화 (Next.js Image)
- 번들 사이즈 분석
- SEO 메타 태그

---

## 4. 검증 계획 (Verification Plan)

### 4.1 수동 테스트 체크리스트

각 Phase 완료 시 사용자에게 브라우저에서 직접 테스트를 요청합니다.

#### Phase 1 테스트
```
1. 터미널에서 `npm run dev` 실행
2. 브라우저에서 http://localhost:3000 접속
3. 빈 페이지가 정상적으로 표시되는지 확인
```

#### Phase 3 테스트 (인증)
```
1. http://localhost:3000/login 접속
2. [Google 로그인] 버튼 클릭
3. 구글 계정으로 로그인
4. 온보딩 또는 홈 화면으로 리다이렉트 확인
```

#### Phase 5 테스트 (홈 화면)
```
1. 로그인 후 홈 화면 접속
2. 퀴즈팩 카드 목록이 표시되는지 확인
3. 첫 번째 카드가 '열림' 상태인지 확인
4. 카드 클릭 시 퀴즈 화면으로 이동 확인
```

#### Phase 6 테스트 (퀴즈 풀이)
```
1. 퀴즈팩 카드 클릭하여 퀴즈 화면 진입
2. 보기 선택 후 [정답 확인] 클릭
3. 정오답 효과(사운드, 오버레이) 확인
4. [다음] 클릭하여 다음 퀴즈로 이동 확인
5. 마지막 퀴즈에서 [완료] 클릭하여 완료 화면 이동 확인
```

### 4.2 자동화 테스트 (Phase 10)
- 브라우저 테스트: 주요 화면 스크린샷 비교
- API 테스트: 엔드포인트 응답 검증

---

## 5. 예상 일정

| Phase | 작업 | 예상 시간 |
|-------|------|----------|
| 1 | 프로젝트 초기 설정 | 2-3시간 |
| 2 | 공통 UI 컴포넌트 | 3-4시간 |
| 3 | 인증 시스템 | 4-5시간 |
| 4 | 온보딩 화면 | 2-3시간 |
| 5 | 홈 화면/퀴즈팩 목록 | 5-6시간 |
| 6 | 퀴즈 풀이 화면 | 8-10시간 |
| 7 | 퀴즈팩 완료 화면 | 3-4시간 |
| 8 | 마이페이지 | 3-4시간 |
| 9 | 고객센터 | 4-5시간 |
| 10 | 테스트/최적화 | 3-4시간 |
| **합계** | | **약 38-48시간** |

---

## 6. 버전 히스토리

| 버전 | 일자 | 변경 내용 |
|------|------|----------|
| v1.0 | 2026-01-18 | 초기 개발 계획서 작성 |
| v1.1 | 2026-02-18 | 실제 폴더 구조 반영, Phase 9 (고객센터) v0.5 제외 표시 |

---

> **현재 상태**: Phase 1~8 개발 완료, Phase 9 (고객센터) v0.5 제외. Phase 10 (UI/UX 개선, 테스트, 최적화) 진행 중.
